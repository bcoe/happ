{"version":3,"file":"index.js","sources":["../../node_modules/@remix-run/dev/dist/config/defaults/entry.server.node.tsx","../../app/helpers/text-to-tailwind.tsx","../../app/sortable-item.tsx","../../app/root.tsx"],"sourcesContent":["import { PassThrough } from \"node:stream\";\n\nimport type { AppLoadContext, EntryContext } from \"@remix-run/node\";\nimport { createReadableStreamFromReadable } from \"@remix-run/node\";\nimport { RemixServer } from \"@remix-run/react\";\nimport * as isbotModule from \"isbot\";\nimport { renderToPipeableStream } from \"react-dom/server\";\n\nconst ABORT_DELAY = 5_000;\n\nexport default function handleRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext,\n  loadContext: AppLoadContext\n) {\n  return isBotRequest(request.headers.get(\"user-agent\"))\n    ? handleBotRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      )\n    : handleBrowserRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      );\n}\n\n// We have some Remix apps in the wild already running with isbot@3 so we need\n// to maintain backwards compatibility even though we want new apps to use\n// isbot@4.  That way, we can ship this as a minor Semver update to @remix-run/dev.\nfunction isBotRequest(userAgent: string | null) {\n  if (!userAgent) {\n    return false;\n  }\n\n  // isbot >= 3.8.0, >4\n  if (\"isbot\" in isbotModule && typeof isbotModule.isbot === \"function\") {\n    return isbotModule.isbot(userAgent);\n  }\n\n  // isbot < 3.8.0\n  if (\"default\" in isbotModule && typeof isbotModule.default === \"function\") {\n    return isbotModule.default(userAgent);\n  }\n\n  return false;\n}\n\nfunction handleBotRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    let shellRendered = false;\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onAllReady() {\n          shellRendered = true;\n          const body = new PassThrough();\n          const stream = createReadableStreamFromReadable(body);\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(stream, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          responseStatusCode = 500;\n          // Log streaming rendering errors from inside the shell.  Don't log\n          // errors encountered during initial shell rendering since they'll\n          // reject and get logged in handleDocumentRequest.\n          if (shellRendered) {\n            console.error(error);\n          }\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n\nfunction handleBrowserRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    let shellRendered = false;\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onShellReady() {\n          shellRendered = true;\n          const body = new PassThrough();\n          const stream = createReadableStreamFromReadable(body);\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(stream, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          responseStatusCode = 500;\n          // Log streaming rendering errors from inside the shell.  Don't log\n          // errors encountered during initial shell rendering since they'll\n          // reject and get logged in handleDocumentRequest.\n          if (shellRendered) {\n            console.error(error);\n          }\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n","import classes from '../style.module.css'\n\nexport function ttt(text: string) {\n  return text.split(' ').map(text => classes[text]).join(' ');\n}\n","import React from 'react';\nimport {useSortable} from '@dnd-kit/sortable';\nimport {CSS} from '@dnd-kit/utilities';\nimport { RxDragHandleHorizontal } from \"react-icons/rx\";\nimport { ttt } from './helpers/text-to-tailwind';\n\nexport function SortableItem(props) {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n  } = useSortable({id: props.id});\n  \n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n  return (\n    <div className={ttt('bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow')} ref={setNodeRef} style={style} {...attributes} {...listeners}>\n      <div className={ttt('grid grid-cols-12')}>\n        <div>\n          <RxDragHandleHorizontal />\n        </div>\n        <div className={ttt('col-span-10')}>\n          {props.value}\n        </div>\n        <div>\n          <input type=\"checkbox\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { withSentry, captureRemixErrorBoundaryError } from \"@sentry/remix\";\nimport { useEffect, useState } from 'react';\nimport {\n  Links,\n  Meta,\n  Outlet,\n  Scripts,\n  useRouteError,\n} from \"@remix-run/react\";\nimport { ttt } from './helpers/text-to-tailwind';\nimport React, {useState} from 'react';\nimport {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from '@dnd-kit/core';\nimport {\n  arrayMove,\n  SortableContext,\n  sortableKeyboardCoordinates,\n  verticalListSortingStrategy,\n} from '@dnd-kit/sortable';\n\nimport {SortableItem} from './sortable-item';\n\nfunction App() {\n  const [items, setItems] = useState([{id: 1, value: 'make coffee'}, {id: 2, value: 'brush my teeth'}, {id: 3, value: 'be rad'}, {id: 4, value: 'go climb a mountain'}]);\n  const sensors = useSensors(\n    useSensor(PointerSensor),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n\n  return (\n    <html>\n      <head>\n        <link\n          rel=\"icon\"\n          href=\"data:image/x-icon;base64,AA\"\n        />\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <div className={ttt('header')}/>\n        <div className={ttt('grid grid-cols-3')}>\n          <div />\n          <div>\n            <DndContext\n              sensors={sensors}\n              collisionDetection={closestCenter}\n              onDragEnd={handleDragEnd}\n            >\n                <SortableContext\n                  items={items}\n                  strategy={verticalListSortingStrategy}\n                >\n                  {items.map(item => <SortableItem value={item.value} key={item.id} id={item.id} />)}\n                </SortableContext>\n            </DndContext>\n          </div>\n          <div />\n        </div>\n        <Scripts />\n      </body>\n    </html>\n  );\n\n  function handleDragEnd(event) {\n    const {active, over} = event;\n    if (active.id !== over.id) {\n      setItems((items) => {\n        const oldIndex = items.findIndex(item => item.id === active.id);\n        const newIndex = items.findIndex(item => item.id === over.id);\n        return arrayMove(items, oldIndex, newIndex);\n      });\n    }\n  }\n}\n\nexport const ErrorBoundary = () => {\n  const error = useRouteError();\n  captureRemixErrorBoundaryError(error);\n  return <div>Something went wrong</div>;\n};\n\nexport default withSentry(App);\n"],"names":["text","transform","transition","items"],"mappings":"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","x_google_ignoreList":[0]}