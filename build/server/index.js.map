{"version":3,"file":"index.js","sources":["../../node_modules/@remix-run/dev/dist/config/defaults/entry.server.node.tsx","../../app/styles/shared.css?url","../../app/providers/habits.tsx","../../app/providers/metrics.tsx","../../app/session.server.tsx","../../app/root.tsx","../../app/components/habit-area-chart.tsx","../../app/routes/metrics.tsx","../../app/images/screen-01.png","../../app/routes/_index.tsx","../../app/components/habit-list-item.tsx","../../app/components/habit-edit.tsx","../../app/routes/habits.tsx","../../app/routes/login.tsx"],"sourcesContent":["import { PassThrough } from \"node:stream\";\n\nimport type { AppLoadContext, EntryContext } from \"@remix-run/node\";\nimport { createReadableStreamFromReadable } from \"@remix-run/node\";\nimport { RemixServer } from \"@remix-run/react\";\nimport * as isbotModule from \"isbot\";\nimport { renderToPipeableStream } from \"react-dom/server\";\n\nconst ABORT_DELAY = 5_000;\n\nexport default function handleRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext,\n  loadContext: AppLoadContext\n) {\n  let prohibitOutOfOrderStreaming =\n    isBotRequest(request.headers.get(\"user-agent\")) || remixContext.isSpaMode;\n\n  return prohibitOutOfOrderStreaming\n    ? handleBotRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      )\n    : handleBrowserRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      );\n}\n\n// We have some Remix apps in the wild already running with isbot@3 so we need\n// to maintain backwards compatibility even though we want new apps to use\n// isbot@4.  That way, we can ship this as a minor Semver update to @remix-run/dev.\nfunction isBotRequest(userAgent: string | null) {\n  if (!userAgent) {\n    return false;\n  }\n\n  // isbot >= 3.8.0, >4\n  if (\"isbot\" in isbotModule && typeof isbotModule.isbot === \"function\") {\n    return isbotModule.isbot(userAgent);\n  }\n\n  // isbot < 3.8.0\n  if (\"default\" in isbotModule && typeof isbotModule.default === \"function\") {\n    return isbotModule.default(userAgent);\n  }\n\n  return false;\n}\n\nfunction handleBotRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    let shellRendered = false;\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onAllReady() {\n          shellRendered = true;\n          const body = new PassThrough();\n          const stream = createReadableStreamFromReadable(body);\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(stream, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          responseStatusCode = 500;\n          // Log streaming rendering errors from inside the shell.  Don't log\n          // errors encountered during initial shell rendering since they'll\n          // reject and get logged in handleDocumentRequest.\n          if (shellRendered) {\n            console.error(error);\n          }\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n\nfunction handleBrowserRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    let shellRendered = false;\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onShellReady() {\n          shellRendered = true;\n          const body = new PassThrough();\n          const stream = createReadableStreamFromReadable(body);\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(stream, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          responseStatusCode = 500;\n          // Log streaming rendering errors from inside the shell.  Don't log\n          // errors encountered during initial shell rendering since they'll\n          // reject and get logged in handleDocumentRequest.\n          if (shellRendered) {\n            console.error(error);\n          }\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n","import \"/Users/benjamincoe/oss/happ/app/styles/shared.css?transform-only\";export default \"__VITE_CSS_URL__2f55736572732f62656e6a616d696e636f652f6f73732f686170702f6170702f7374796c65732f7368617265642e6373733f7472616e73666f726d2d6f6e6c79__\"","import * as React from \"react\";\n\nexport type DayToggles = {\n  Mon: boolean;\n  Tue: boolean;\n  Wed: boolean;\n  Thu: boolean;\n  Fri: boolean;\n  Sat: boolean;\n  Sun: boolean;\n};\n\nexport const NO_DAYS_SET = {\n  Mon: false,\n  Tue: false,\n  Wed: false,\n  Thu: false,\n  Fri: false,\n  Sat: false,\n  Sun: false\n};\n\nexport const ALL_DAYS_SET = {\n  Mon: true,\n  Tue: true,\n  Wed: true,\n  Thu: true,\n  Fri: true,\n  Sat: true,\n  Sun: true\n};\n\nexport interface HabitType {\n  name: string;\n  days: DayToggles,\n  habit_id: string;\n  id: string;\n  status: boolean;\n  date: string;\n}\n\nexport interface HabitResponse {\n  current_dow: string;\n  habits: Array<HabitType>;\n}\n\ninterface HabitsType {\n  habits: Array<HabitType>; \n  empty: boolean;\n  currentDayOfWeek: string;\n  editing: boolean;\n  currentlyEditing?: HabitType;\n  setEditing: (editing: boolean, id: string | undefined) => Promise<void>;\n  load: () => Promise<void>;\n  create: (name: string, days: DayToggles) => Promise<void>;\n  update: (id: string, name: string, days: DayToggles) => Promise<void>;\n  set: (habits: HabitResponse) => {};\n  toggle: (id: string) => Promise<void>;\n  move: (oldIndex: number, newIndex: number) => Promise<void>;\n}\n\nconst HabitsContext = React.createContext<HabitsType>(null!);\n\nexport function HabitsProvider({ children }: { children: React.ReactNode }) {\n  const [habits, setHabits] = React.useState<Array<HabitType>>([]);\n  const [empty, setEmpty] = React.useState<boolean>(false);\n  const [currentDayOfWeek, setCurrentDayOfWeek] = React.useState<string>('');\n  const [editing, _setEditing] = React.useState<boolean>(false);\n  const [currentlyEditing, setCurrentlyEditing] = React.useState<HabitType | undefined>(undefined);\n\n  const set = (habits: HabitResponse) => {\n    setHabits([...habits.habits]);\n    setEmpty(!habits.habits.length);\n    setCurrentDayOfWeek(habits.current_dow);\n    return {}\n  }\n\n  const create = async (name: string, days: DayToggles) => {\n    let hasDaysSet = false;\n    for (const toggle of Object.values(days)) {\n      if (toggle) hasDaysSet = true;\n    }\n    await fetch('/v1/habits', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({name, days: hasDaysSet ? days : undefined})\n    });\n  }\n\n  const update = async (id: string, name: string, days: DayToggles) => {\n    let hasDaysSet = false;\n    for (const toggle of Object.values(days)) {\n      if (toggle) hasDaysSet = true;\n    }\n    await fetch(`/v1/habits/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({name, days: hasDaysSet ? days : ALL_DAYS_SET})\n    });\n  }\n\n  const toggle = async (id: string) => {\n    const habit = habits.find((h) => {\n      if (h.id === id) return true;\n    })\n    if (!habit) return;\n    await fetch('/v1/habits-daily', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        habit_id: habit.habit_id,\n        status: !habit.status,\n        date: habit.date,\n      })\n    });\n  }\n\n  const move = async (oldIndex: number, newIndex: number) => {\n    await fetch('/v1/habits/array-move', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        oldIndex,\n        newIndex\n      })\n    });\n  }\n\n  const load = async () => {\n    const resp = await fetch(\"/v1/habits-daily\");\n    const habits = await resp.json();\n    habits.habits.map((h) => {\n      h.id = h.habit_id;\n    });\n    set(habits);\n  }\n\n  const setEditing = async (editing: boolean, id: string | undefined) => {\n    if (id) {\n      setCurrentlyEditing(habits.find(h => {\n        return h.id === id;\n      }));\n    } else {\n      setCurrentlyEditing(undefined);\n    }\n    _setEditing(editing);\n  }\n\n  const value = { habits, empty, currentDayOfWeek, editing, setEditing, currentlyEditing, load, set, create, update, toggle, move };\n\n  return <HabitsContext.Provider value={value}>{children}</HabitsContext.Provider>;\n}\n\nexport function useHabits() {\n  return React.useContext(HabitsContext);\n}\n","import * as React from \"react\";\n\nexport interface MetricType {\n  daily: Array<{\n    name: string;\n    completed: number;\n  }>\n}\n\ninterface MetricsType {\n  metrics: MetricType; \n  load: () => Promise<void>;\n  set: (metrics: MetricType) => {};\n}\n\nconst MetricsContext = React.createContext<MetricsType>(null!);\n\nexport function MetricsProvider({ children }: { children: React.ReactNode }) {\n  const [metrics, setMetrics] =  React.useState<MetricType>({daily: []});\n\n  const set = (metrics: MetricType) => {\n    setMetrics(metrics);\n    return {}\n  }\n\n  const load = async () => {\n    const resp = await fetch(\"/v1/metrics\");\n    const m = await resp.json();\n    set({daily: m.map((item) => {\n      const date = (new Date(item.date)).toISOString().split('T')[0];\n      return {\n        name: date,\n        completed: item.habits_completed / item.total_habits_for_day\n      }\n    })});\n  }\n\n  const value = { metrics, load, set };\n\n  return <MetricsContext.Provider value={value}>{children}</MetricsContext.Provider>;\n}\n\nexport function useMetrics() {\n  return React.useContext(MetricsContext);\n}\n","import { redirect } from \"@remix-run/node\";\nimport 'dotenv/config';\n\n// Session stuff:\nimport { createClient } from 'redis';\nimport RedisStore from 'connect-redis';\nimport session from 'express-session';\n\nconst isTestEnvironment = process.env.NODE_ENV === 'test';\n\ntype SessionObject = {\n  userId?: string;\n}\n\ntype SessionStoreCallback = (sess: SessionObject) => void;\n\ntype ConnectDecoratedReq = {\n  sessionStore?: {\n    get: (id: string, SessionStoreCallback) => void;\n  };\n  sessionID?: string;\n  headers: { [name: string]: string | null },\n  url: string\n}\n\ntype SessionOpts = {\n  resave: boolean;\n  saveUninitialized: boolean;\n  secret?: string;\n  store?: any;\n}\n\nconst sessionOpts: SessionOpts = {\n  resave: false,\n  saveUninitialized: false,\n  secret: process.env.SESSION_SECRET,\n};\nconst sessionPrefix = `happ:${process.env.NODE_ENV}`\nif (!isTestEnvironment) {\n  const redisClient = createClient({\n    url: process.env.REDIS_URL,\n  });\n  const redisStore = new RedisStore({\n    client: redisClient,\n    prefix: sessionPrefix,\n  });\n  redisClient.connect();\n  redisClient.unref();\n  sessionOpts.store = redisStore;\n}\nconst s = session(sessionOpts);\n\nexport async function isLoggedIn(req: Request): Promise<string | undefined> {\n  const connectReq: ConnectDecoratedReq = {\n    headers: {\n      cookie: req.headers.get('cookie')\n    },\n    url: '/'\n  }\n  s(connectReq, {}, () => {});\n  const sess: SessionObject = await new Promise((resolve) => {\n    if (!connectReq.sessionID) return resolve({});\n    if (!connectReq.sessionStore) return resolve({});\n    connectReq.sessionStore.get(connectReq.sessionID, (err, sess: SessionObject) => {\n      if (err || !sess) return resolve({});\n      return resolve(sess);\n    })\n  });\n  return sess.userId;\n}\n\nexport async function requireUserId(\n  req: Request,\n) {\n  if (!await isLoggedIn(req)) {\n    throw redirect('/login');\n  }\n}\n","import React from 'react';\nimport { withSentry, captureRemixErrorBoundaryError } from \"@sentry/remix\";\nimport {\n  Link,\n  Links,\n  Meta,\n  Outlet,\n  Scripts,\n  useRouteError,\n  useLoaderData,\n} from \"@remix-run/react\";\nimport { json, LinksFunction } from \"@remix-run/node\";\nimport styles from \"./styles/shared.css?url\";\nimport {HabitsProvider} from './providers/habits';\nimport {MetricsProvider} from './providers/metrics';\nimport { isLoggedIn } from \"./session.server\";\nimport { FaThList } from \"react-icons/fa\";\n\nexport const links: LinksFunction = () => [\n  { rel: \"stylesheet\", href: styles },\n];\n\ntype LoggedInData = {\n  isLoggedIn: boolean;\n}\n\nexport const loader = async ({request}) => {\n  const userId = await isLoggedIn(request);\n  return json<LoggedInData>({ isLoggedIn: !!userId });\n};\n\nfunction App() {\n  const { isLoggedIn } = useLoaderData<typeof loader>();\n  return (\n    <html>\n      <head>\n        <link\n          rel=\"icon\"\n          href=\"data:image/x-icon;base64,AA\"\n        />\n        <Links />\n        <Meta />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      </head>\n      <body>\n        <div className={'header'}>\n          <div className=\"flex\">\n            <div>\n              <Link to=\"/\">\n                <FaThList className={'ml-8 mt-1 size-5'} />\n              </Link>\n            </div>\n            <div className='ml-8'>\n              <Link className={'font-medium text-blue-600 dark:text-blue-500 hover:underline'} to=\"/habits\">Habits</Link>\n            </div>\n            <div className='ml-8'>\n              <Link className={'font-medium text-blue-600 dark:text-blue-500 hover:underline'} to=\"/metrics\">Metrics</Link>\n            </div>\n            {isLoggedIn &&\n              <div className={'text-right w-full'}>\n                <a className={'font-medium text-blue-600 dark:text-blue-500 hover:underline'} href=\"/v1/logout\">Logout</a>\n              </div>\n            }\n            {!isLoggedIn &&\n              <div className={'text-right w-full'}>\n                <Link className={'font-medium text-blue-600 dark:text-blue-500 hover:underline'} to=\"/login\">Login</Link>\n              </div>\n            }\n          </div>\n        </div>\n        <div className='flex w-full'>\n          <div className='lg:w-1/6' />\n          <div className={'w-full lg:w-4/6'}>\n            <HabitsProvider>\n              <MetricsProvider>\n                {<Outlet />}\n              </MetricsProvider>\n            </HabitsProvider>\n          </div>\n          <div className='lg:w-1/6' />\n        </div>\n        <Scripts />\n      </body>\n    </html>\n  );\n}\n\nexport const ErrorBoundary = () => {\n  const error = useRouteError();\n  captureRemixErrorBoundaryError(error);\n  return <div>Something went wrong</div>;\n};\n\nexport default withSentry(App);\n","import React, { PureComponent } from 'react';\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { json, useLoaderData } from \"@remix-run/react\";\n\nconst toPercent = (decimal) => `${(decimal * 100).toFixed(0)}%`;\nconst tooltipFormatter = (value) => toPercent(value);\n\nexport default class HabitAreaChart extends PureComponent<{data: any}> {\n  render() {\n    return (\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <AreaChart\n          data={this.props.data}\n          margin={{\n            top: 10,\n            right: 30,\n            left: 0,\n            bottom: 0,\n          }}\n        >\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"name\" />\n          <YAxis tickFormatter={toPercent} />\n          <Tooltip formatter={tooltipFormatter} />\n          <Area type=\"monotone\" dataKey=\"completed\" stroke=\"#8884d8\" fill=\"#8884d8\" />\n        </AreaChart>\n      </ResponsiveContainer>\n    );\n  }\n}\n","import React, {useEffect, useState} from 'react'\nimport HabitAreaChart from '../components/habit-area-chart.tsx';\nimport { useMetrics } from '../providers/metrics';\nimport { requireUserId } from \"../session.server\";\n\nexport async function loader({request}) {\n  await requireUserId(request);\n  return {}\n}\n\nexport default function Login () {\n  const metrics = useMetrics();\n  const [initialLoad, setInitialLoad] = useState<boolean>(true);\n  useEffect(() => {\n    if (!initialLoad) return;\n    setInitialLoad(false);\n    metrics.load(); \n  }, [metrics]);\n  return (\n    <div className={'bg-white text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow'}>\n      <h2 className={'text-center'}>Habit completion by day</h2>\n      <div className={'m-4 h-56'}>\n        <HabitAreaChart data={metrics.metrics.daily} />\n      </div>\n    </div>\n  )\n}\n","export default \"__VITE_ASSET__Dn9EiQfL__\"","import React from 'react'\nimport screen from \"../images/screen-01.png\";\n\nexport default function Index () {\n  return (\n    <div className={'lg:flex'}>\n      <div className={'lg:w-2/3 sm:full-width'}>\n        <img src={screen} />\n      </div>\n      <div className={'mt-10 lg:w-1/3 sm:full-width m-8 lg:m-1'}>\n        <blockquote className=\"text-xl italic font-semibold text-gray-900 dark:text-white\">\n            <svg className=\"w-8 h-8 text-gray-400 dark:text-gray-600 mb-4\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 18 14\">\n                <path d=\"M6 0H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4v1a3 3 0 0 1-3 3H2a1 1 0 0 0 0 2h1a5.006 5.006 0 0 0 5-5V2a2 2 0 0 0-2-2Zm10 0h-4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4v1a3 3 0 0 1-3 3h-1a1 1 0 0 0 0 2h1a5.006 5.006 0 0 0 5-5V2a2 2 0 0 0-2-2Z\"/>\n            </svg>\n            <p className={'text-gray-400'}>HabitTrack.me lets you track daily habits that you'd like to make a part of your routine. Its metrics allow you to see if you're meeting your goals week over week.</p>\n        </blockquote>\n      </div>\n    </div>\n  )\n}\n","import React from 'react';\nimport {useSortable} from '@dnd-kit/sortable';\nimport {CSS} from '@dnd-kit/utilities';\nimport { RxDragHandleHorizontal } from \"react-icons/rx\";\nimport { FiEdit } from \"react-icons/fi\";\nimport { useHabits } from '../providers/habits';\n\nexport function HabitListItem(props) {\n  const habits = useHabits();\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n  } = useSortable({id: props.id, disabled: props.disabled});\n\n  async function handleChange(event) {\n    event.preventDefault();\n    await habits.toggle(props.id);\n    await habits.load();\n  }\n\n  async function handleEdit() {\n    habits.setEditing(true, props.id);\n  }\n\n  function hideRow() {\n    const habitAppliesToDay = !props.days || props.days[habits.currentDayOfWeek];\n    return props.disabled === true && habitAppliesToDay === false;\n  }\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n  return (\n    hideRow() ? '' : (\n      <div ref={setNodeRef} style={style} {...attributes}>\n        <div className='flex w-full bg-white text-gray-800 py-2 px-4 border border-gray-400 rounded shadow habit-item disable-touch' >\n          <div {...listeners} className=\"w-8 mr-2\">\n            {props.disabled ? '' : <RxDragHandleHorizontal className=\"mt-1 size-6\" />}\n          </div>\n          <div className='w-5/6 mt-0.5'>\n            {props.name}\n          </div>\n          <div className='w-1/6 text-right'>\n            <div className=\"flex w-full\">\n              <div className='w-2/4' />\n              <div className='w-2/4'>\n                {props.disabled ? <input type=\"checkbox\" checked={props.status} onChange={handleChange} className={'w-4 h-4 mt-2'} /> : <FiEdit className='mt-1 size-6'  onClick={handleEdit} />}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  );\n}\n","import React from 'react';\nimport { useEffect } from 'react';\nimport { useHabits, DayToggles, NO_DAYS_SET } from '../providers/habits';\n\nconst DAY_LOOKUP = {\n  Mon: 'Monday',\n  Tue: 'Tuesday',\n  Wed: 'Wednesday',\n  Thu: 'Thursday',\n  Fri: 'Friday',\n  Sat: 'Saturday',\n  Sun: 'Sunday'\n};\n\nexport function HabitEdit() {\n  const habits = useHabits();\n  const [id, setId] = React.useState<string>('');\n  const [name, setName] = React.useState<string>('');\n  const [days, setDays] = React.useState<DayToggles>(NO_DAYS_SET);\n\n  function cancel() {\n    habits.setEditing(false, undefined);\n  }\n\n  async function save() { \n    await habits.update(id, name, days);\n    await habits.load();\n    habits.setEditing(false, undefined);\n  }\n\n  function toggleDay(e) {\n    const toggledDay = !days[e.target.dataset.day];\n    setDays(prevDays => {\n      prevDays[e.target.dataset.day] = toggledDay;\n      return {...prevDays}\n    });\n  }\n\n  useEffect(() => {\n    if (habits.editing && habits.currentlyEditing) {\n      setId(habits.currentlyEditing.id);\n      setName(habits.currentlyEditing.name);\n      let allDaysSet = true;\n      // Handle the case where the days is null:\n      if (habits.currentlyEditing.days) {\n        for (const toggle of Object.values(habits.currentlyEditing.days)) {\n          if (!toggle) allDaysSet = false;\n        }\n      }\n      if (!allDaysSet) {\n        setDays(JSON.parse(JSON.stringify(habits.currentlyEditing.days)));\n      } else {\n        setDays(JSON.parse(JSON.stringify(NO_DAYS_SET)));\n      }\n    }\n  },[habits.editing]);\n\n  return (\n    <div className={`relative z-10${habits.editing ? ' visible' : ' invisible'}`} aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n      <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"></div>\n      <div className=\"fixed inset-0 z-10 w-screen overflow-y-auto\">\n        <div className=\"flex min-h-full items-baseline justify-center p-4 text-center sm:items-baseline sm:p-0\">\n          <div className=\"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg\">\n            <div className=\"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4\">\n              <div className=\"sm:flex sm:items-start\">\n                <div className=\"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10\">\n                  <svg className=\"w-6 h-6 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <path stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z\"/>\n                  </svg>\n                </div>\n                <div className=\"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left\">\n                  <h3 className=\"text-base font-semibold leading-6 text-gray-900\" id=\"modal-title\">Edit habit</h3>\n                  <div className=\"mt-2\">\n                    <input autoComplete={'off'} name=\"name\" type=\"text\" className='block w-96 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-normal focus:outline-none focus:shadow-outline' value={name} onChange={e => setName(e.target.value)} />\n                    <ul className=\"grid w-full grid-cols-2 gap-2 mt-5\">\n                      {Object.keys(days).map(day => (\n                        <li key={day}>\n                          <span data-day={day} onClick={toggleDay} className={`inline-flex items-center justify-center w-full p-2 text-sm font-medium text-center border rounded-lg cursor-pointer text-blue-600 border-blue-600${days[day] ? ' text-white bg-blue-500' : ' bg-white'}`}>\n                            {DAY_LOOKUP[day]}\n                          </span>\n                        </li>\n                      ))}\n                  </ul>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex bg-gray-50 px-4 py-3 px-6\">\n              <div className=\"w-full\">\n                <button type=\"button\" onClick={save} className=\"mr-1 bg-blue-500 hover:bg-blue-700 mt-3 inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm ring-1 ring-inset sm:mt-0 sm:w-auto text-white\">Save</button>\n                <button type=\"button\" onClick={cancel} className=\"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto\">Cancel</button>\n              </div>\n              <div className=\"w-full text-right\">\n                <button type=\"button\" className=\"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto sm:mt-0 sm-ml-0 ml-2 mt-3\">Delete</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Await  } from \"@remix-run/react\";\nimport { requireUserId } from \"../session.server\";\nimport React, { useState, useEffect, Suspense } from 'react';\nimport {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  TouchSensor,\n  useSensor,\n  useSensors,\n} from '@dnd-kit/core';\nimport {\n  arrayMove,\n  SortableContext,\n  sortableKeyboardCoordinates,\n  verticalListSortingStrategy,\n} from '@dnd-kit/sortable';\nimport { HabitListItem } from '../components/habit-list-item';\nimport { HabitEdit } from '../components/habit-edit';\nimport { useHabits, DayToggles } from '../providers/habits';\n\nconst DAY_LOOKUP = {\n  Mon: 'Mon',\n  Tue: 'Tue',\n  Wed: 'Wed',\n  Thu: 'Thu',\n  Fri: 'Fri',\n  Sat: 'Sat',\n  Sun: 'Sun'\n};\n\nexport async function loader({request}) {\n  await requireUserId(request);\n  return {}\n}\n\nexport default function Habits() {\n  const habits = useHabits();\n  const [initialLoad, setInitialLoad] = useState<boolean>(true);\n  const [sorting, setSorting] = useState<boolean>(false);\n  const [days, setDays] = React.useState<DayToggles>({\n    Mon: false,\n    Tue: false,\n    Wed: false,\n    Thu: false,\n    Fri: false,\n    Sat: false,\n    Sun: false\n  });\n  const sensors = useSensors(\n    useSensor(PointerSensor),\n    useSensor(TouchSensor),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n  useEffect(() => {\n    if (!initialLoad) return;\n    habits.load();\n    setInitialLoad(false);\n  }, [initialLoad, habits]);\n  \n  async function createDailyHabit(e) {\n    e.preventDefault();\n    const name = e.target.name.value;\n    await habits.create(name, days);\n    await habits.load();\n    e.target.reset();\n  }\n\n  function handleChange(event) {\n    setSorting(!sorting);\n  }\n\n  async function handleDragEnd(event) {\n    const {active, over} = event;\n    const oldIndex = habits.habits.findIndex(item => item.habit_id === active.id);\n    const newIndex = habits.habits.findIndex(item => item.habit_id === over.id);\n    let insertIndex = newIndex;\n    let action = 'before';\n    if (newIndex > oldIndex) {\n      action = 'after';\n      if (newIndex >= habits.habits.length) {\n        insertIndex = habits.habits.length - 1;\n      }\n    }\n    if (oldIndex !== newIndex) {\n      habits.set({\n        habits: arrayMove(habits.habits, oldIndex, newIndex),\n        current_dow: habits.currentDayOfWeek\n      });\n      await habits.move(oldIndex, newIndex);\n      await habits.load();\n    }\n  }\n  \n  function toggleDay(e) {\n    const toggledDay = !days[e.target.dataset.day];\n    setDays(prevDays => {\n      prevDays[e.target.dataset.day] = toggledDay;\n      return {...prevDays}\n    });\n  }\n\n  return (\n    <Suspense>\n        <Await resolve={habits}>\n          <HabitEdit />\n          {habits.empty ? (\n              <div className={'border-dashed border-2 border-slate-100 grid grid-cols-3 p-10'}>\n                <div></div>\n                <div>\n                  <p>\n                    You have not yet created your first daily habit. Enter a daily habit that you would\n                    like to start keeping into the text box below and click\n                    <span className={'text-xs\tbg-blue-500 ml-2 text-white font-bold py-1 px-2 rounded whitespace-nowrap'}>Add Habit</span>\n                  </p>\n                </div>\n                <div></div>\n              </div>\n          ) : ''}\n          <DndContext\n            sensors={sensors}\n            collisionDetection={closestCenter}\n            onDragEnd={handleDragEnd}\n          >\n            <SortableContext\n              items={habits.habits}\n              strategy={verticalListSortingStrategy}\n            >\n              {habits.habits.map(habit => <HabitListItem name={habit.name} key={habit.habit_id} id={habit.habit_id} status={habit.status} days={habit.days} disabled={!sorting} />)}\n            </SortableContext>\n          </DndContext>\n          {(sorting || habits.empty) ? (\n            <form onSubmit={createDailyHabit}>\n              <div className='flex w-full'>\n                <div className='w-4/6 mt-1'>\n                  <input autoComplete={'off'} name=\"name\" type=\"text\" className='shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-normal focus:outline-none focus:shadow-outline' />\n                </div>\n                <input type=\"submit\" value=\"Add Habit\" className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 ml-1 mt-1 rounded focus:outline-none focus:shadow-outline w-2/6' />\n              </div>\n              <ul className='flex w-full'>\n                {Object.keys(days).map((day, i) => (\n                  <li data-day={day} key={day} onClick={toggleDay} className={`p-1 ${i === 0 ? '' : 'ml-1'} text-sm font-medium text-center border rounded-lg cursor-pointer text-blue-600 border-blue-600${days[day] ? ' text-white bg-blue-500' : ' bg-white'}`}>\n                    {DAY_LOOKUP[day]}\n                  </li>\n                ))}\n              </ul>\n            </form>\n          ) : ''}\n          <label className=\"mt-3 inline-flex items-center cursor-pointer\">\n            <input type=\"checkbox\" value=\"\" className=\"sr-only peer\" checked={sorting || habits.empty} onChange={handleChange} />\n            <div className=\"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n            <span className=\"ms-3 text-base font-medium text-gray-900 dark:text-gray-300\">Add / edit habits</span>\n          </label>\n        </Await>\n    </Suspense>\n  )\n}\n","import React from 'react'\nimport { json } from \"@remix-run/node\";\nimport { OAuth2Client } from 'google-auth-library';\nimport { FaGoogle } from \"react-icons/fa\";\nimport { Link, useLoaderData } from \"@remix-run/react\";\n\nconst oAuth2Client = new OAuth2Client(\n  process.env.OAUTH_CLIENT_ID,\n  process.env.OAUTH_CLIENT_SECRET,\n  process.env.OAUTH_REDIRECT,\n);\n\ntype RedirectData = {\n  data: {\n    redirect: string;\n  }\n}\n\nexport const loader = async () => {\n  const redirect = oAuth2Client.generateAuthUrl({\n    access_type: 'offline',\n    scope: [\n      'https://www.googleapis.com/auth/userinfo.profile',\n      'https://www.googleapis.com/auth/userinfo.email',\n    ],\n  });\n  return json({\n    data: {\n      redirect\n    }\n  });\n};\n\nexport default function Login () {\n  const {data} = useLoaderData<RedirectData>();\n  return (\n    <div className={'bg-white text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow'}>\n      <Link id=\"login-with-google\" className={'grid grid-cols-3'} to={data.redirect} data-testid=\"google-login\">\n        <div className={'pt-1'}>\n          <FaGoogle />\n        </div>\n        <div className={'text-center'}>\n          Login with Google\n        </div>\n      </Link>\n    </div>\n  )\n}\n"],"names":["habits","toggle","editing","metrics","sess","loader","isLoggedIn","Login","DAY_LOOKUP","React","redirect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,MAAM,cAAc;AAEpB,SAAwB,cACtB,SACA,oBACA,iBACA,cACA,aACA;AACI,MAAA,8BACF,aAAa,QAAQ,QAAQ,IAAI,YAAY,CAAC,KAAK,aAAa;AAElE,SAAO,8BACH;AAAA,IACE;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,IAEF;AAAA,IACE;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAER;AAKA,SAAS,aAAa,WAA0B;AAC9C,MAAI,CAAC,WAAW;AACP,WAAA;AAAA,EACT;AAGA,MAAI,WAAW,eAAe,OAAO,YAAY,UAAU,YAAY;AAC9D,WAAA,YAAY,MAAM,SAAS;AAAA,EACpC;AAGA,MAAI,aAAa,eAAe,OAAO,YAAY,YAAY,YAAY;AAClE,WAAA,YAAY,QAAQ,SAAS;AAAA,EACtC;AAEO,SAAA;AACT;AAEA,SAAS,iBACP,SACA,oBACA,iBACA,cACA;AACA,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,QAAI,gBAAgB;AACd,UAAA,EAAE,MAAM,MAAA,IAAU;AAAA,MACtB;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,SAAS;AAAA,UACT,KAAK,QAAQ;AAAA,UACb,YAAY;AAAA,QAAA;AAAA,MACd;AAAA,MACA;AAAA,QACE,aAAa;AACK,0BAAA;AACV,gBAAA,OAAO,IAAI;AACX,gBAAA,SAAS,iCAAiC,IAAI;AAEpC,0BAAA,IAAI,gBAAgB,WAAW;AAE/C;AAAA,YACE,IAAI,SAAS,QAAQ;AAAA,cACnB,SAAS;AAAA,cACT,QAAQ;AAAA,YAAA,CACT;AAAA,UAAA;AAGH,eAAK,IAAI;AAAA,QACX;AAAA,QACA,aAAa,OAAgB;AAC3B,iBAAO,KAAK;AAAA,QACd;AAAA,QACA,QAAQ,OAAgB;AACD,+BAAA;AAIrB,cAAI,eAAe;AACjB,oBAAQ,MAAM,KAAK;AAAA,UACrB;AAAA,QACF;AAAA,MACF;AAAA,IAAA;AAGF,eAAW,OAAO,WAAW;AAAA,EAAA,CAC9B;AACH;AAEA,SAAS,qBACP,SACA,oBACA,iBACA,cACA;AACA,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,QAAI,gBAAgB;AACd,UAAA,EAAE,MAAM,MAAA,IAAU;AAAA,MACtB;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,SAAS;AAAA,UACT,KAAK,QAAQ;AAAA,UACb,YAAY;AAAA,QAAA;AAAA,MACd;AAAA,MACA;AAAA,QACE,eAAe;AACG,0BAAA;AACV,gBAAA,OAAO,IAAI;AACX,gBAAA,SAAS,iCAAiC,IAAI;AAEpC,0BAAA,IAAI,gBAAgB,WAAW;AAE/C;AAAA,YACE,IAAI,SAAS,QAAQ;AAAA,cACnB,SAAS;AAAA,cACT,QAAQ;AAAA,YAAA,CACT;AAAA,UAAA;AAGH,eAAK,IAAI;AAAA,QACX;AAAA,QACA,aAAa,OAAgB;AAC3B,iBAAO,KAAK;AAAA,QACd;AAAA,QACA,QAAQ,OAAgB;AACD,+BAAA;AAIrB,cAAI,eAAe;AACjB,oBAAQ,MAAM,KAAK;AAAA,UACrB;AAAA,QACF;AAAA,MACF;AAAA,IAAA;AAGF,eAAW,OAAO,WAAW;AAAA,EAAA,CAC9B;AACH;;;;;AC1J0E,MAAe,SAAA;;;ACYlF,MAAM,cAAc;AAAA,EACzB,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AACP;AAEO,MAAM,eAAe;AAAA,EAC1B,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AACP;AA+BA,MAAM,gBAAgB,MAAM,cAA0B,IAAK;AAE3C,SAAA,eAAe,EAAE,YAA2C;AAC1E,QAAM,CAAC,QAAQ,SAAS,IAAI,MAAM,SAA2B,CAAA,CAAE;AAC/D,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAkB,KAAK;AACvD,QAAM,CAAC,kBAAkB,mBAAmB,IAAI,MAAM,SAAiB,EAAE;AACzE,QAAM,CAAC,SAAS,WAAW,IAAI,MAAM,SAAkB,KAAK;AAC5D,QAAM,CAAC,kBAAkB,mBAAmB,IAAI,MAAM,SAAgC,MAAS;AAEzF,QAAA,MAAM,CAACA,YAA0B;AACrC,cAAU,CAAC,GAAGA,QAAO,MAAM,CAAC;AACnB,aAAA,CAACA,QAAO,OAAO,MAAM;AAC9B,wBAAoBA,QAAO,WAAW;AACtC,WAAO;EAAC;AAGJ,QAAA,SAAS,OAAO,MAAc,SAAqB;AACvD,QAAI,aAAa;AACjB,eAAWC,WAAU,OAAO,OAAO,IAAI,GAAG;AACpCA,UAAAA;AAAqB,qBAAA;AAAA,IAC3B;AACA,UAAM,MAAM,cAAc;AAAA,MACxB,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM,KAAK,UAAU,EAAC,MAAM,MAAM,aAAa,OAAO,QAAU;AAAA,IAAA,CACjE;AAAA,EAAA;AAGH,QAAM,SAAS,OAAO,IAAY,MAAc,SAAqB;AACnE,QAAI,aAAa;AACjB,eAAWA,WAAU,OAAO,OAAO,IAAI,GAAG;AACpCA,UAAAA;AAAqB,qBAAA;AAAA,IAC3B;AACM,UAAA,MAAM,cAAc,EAAE,IAAI;AAAA,MAC9B,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM,KAAK,UAAU,EAAC,MAAM,MAAM,aAAa,OAAO,cAAa;AAAA,IAAA,CACpE;AAAA,EAAA;AAGG,QAAA,SAAS,OAAO,OAAe;AACnC,UAAM,QAAQ,OAAO,KAAK,CAAC,MAAM;AAC/B,UAAI,EAAE,OAAO;AAAW,eAAA;AAAA,IAAA,CACzB;AACD,QAAI,CAAC;AAAO;AACZ,UAAM,MAAM,oBAAoB;AAAA,MAC9B,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,UAAU,MAAM;AAAA,QAChB,QAAQ,CAAC,MAAM;AAAA,QACf,MAAM,MAAM;AAAA,MAAA,CACb;AAAA,IAAA,CACF;AAAA,EAAA;AAGG,QAAA,OAAO,OAAO,UAAkB,aAAqB;AACzD,UAAM,MAAM,yBAAyB;AAAA,MACnC,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB;AAAA,QACA;AAAA,MAAA,CACD;AAAA,IAAA,CACF;AAAA,EAAA;AAGH,QAAM,OAAO,YAAY;AACjB,UAAA,OAAO,MAAM,MAAM,kBAAkB;AACrCD,UAAAA,UAAS,MAAM,KAAK;AAC1BA,YAAO,OAAO,IAAI,CAAC,MAAM;AACvB,QAAE,KAAK,EAAE;AAAA,IAAA,CACV;AACD,QAAIA,OAAM;AAAA,EAAA;AAGN,QAAA,aAAa,OAAOE,UAAkB,OAA2B;AACrE,QAAI,IAAI;AACc,0BAAA,OAAO,KAAK,CAAK,MAAA;AACnC,eAAO,EAAE,OAAO;AAAA,MACjB,CAAA,CAAC;AAAA,IAAA,OACG;AACL,0BAAoB,MAAS;AAAA,IAC/B;AACA,gBAAYA,QAAO;AAAA,EAAA;AAGrB,QAAM,QAAQ,EAAE,QAAQ,OAAO,kBAAkB,SAAS,YAAY,kBAAkB,MAAM,KAAK,QAAQ,QAAQ,QAAQ,KAAK;AAEhI,SAAQ,oBAAA,cAAc,UAAd,EAAuB,OAAe,SAAS,CAAA;AACzD;AAEO,SAAS,YAAY;AACnB,SAAA,MAAM,WAAW,aAAa;AACvC;ACpJA,MAAM,iBAAiB,MAAM,cAA2B,IAAK;AAE7C,SAAA,gBAAgB,EAAE,YAA2C;AACrE,QAAA,CAAC,SAAS,UAAU,IAAK,MAAM,SAAqB,EAAC,OAAO,CAAC,EAAA,CAAE;AAE/D,QAAA,MAAM,CAACC,aAAwB;AACnC,eAAWA,QAAO;AAClB,WAAO;EAAC;AAGV,QAAM,OAAO,YAAY;AACjB,UAAA,OAAO,MAAM,MAAM,aAAa;AAChC,UAAA,IAAI,MAAM,KAAK;AACrB,QAAI,EAAC,OAAO,EAAE,IAAI,CAAC,SAAS;AACpB,YAAA,OAAQ,IAAI,KAAK,KAAK,IAAI,EAAG,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC;AACtD,aAAA;AAAA,QACL,MAAM;AAAA,QACN,WAAW,KAAK,mBAAmB,KAAK;AAAA,MAAA;AAAA,IAE3C,CAAA,EAAE,CAAA;AAAA,EAAA;AAGL,QAAM,QAAQ,EAAE,SAAS,MAAM,IAAI;AAEnC,SAAQ,oBAAA,eAAe,UAAf,EAAwB,OAAe,SAAS,CAAA;AAC1D;AAEO,SAAS,aAAa;AACpB,SAAA,MAAM,WAAW,cAAc;AACxC;ACpCA,MAAM,oBAAoB,QAAQ,IAAI,aAAa;AAwBnD,MAAM,cAA2B;AAAA,EAC/B,QAAQ;AAAA,EACR,mBAAmB;AAAA,EACnB,QAAQ,QAAQ,IAAI;AACtB;AACA,MAAM,gBAAgB,QAAQ,QAAQ,IAAI,QAAQ;AAClD,IAAI,CAAC,mBAAmB;AACtB,QAAM,cAAc,aAAa;AAAA,IAC/B,KAAK,QAAQ,IAAI;AAAA,EAAA,CAClB;AACK,QAAA,aAAa,IAAI,WAAW;AAAA,IAChC,QAAQ;AAAA,IACR,QAAQ;AAAA,EAAA,CACT;AACD,cAAY,QAAQ;AACpB,cAAY,MAAM;AAClB,cAAY,QAAQ;AACtB;AACA,MAAM,IAAI,QAAQ,WAAW;AAE7B,eAAsB,WAAW,KAA2C;AAC1E,QAAM,aAAkC;AAAA,IACtC,SAAS;AAAA,MACP,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AAAA,IAClC;AAAA,IACA,KAAK;AAAA,EAAA;AAEL,IAAA,YAAY,CAAA,GAAI,MAAM;AAAA,EAAA,CAAE;AAC1B,QAAM,OAAsB,MAAM,IAAI,QAAQ,CAAC,YAAY;AACzD,QAAI,CAAC,WAAW;AAAkB,aAAA,QAAQ,CAAA,CAAE;AAC5C,QAAI,CAAC,WAAW;AAAqB,aAAA,QAAQ,CAAA,CAAE;AAC/C,eAAW,aAAa,IAAI,WAAW,WAAW,CAAC,KAAKC,UAAwB;AAC9E,UAAI,OAAO,CAACA;AAAa,eAAA,QAAQ,CAAA,CAAE;AACnC,aAAO,QAAQA,KAAI;AAAA,IAAA,CACpB;AAAA,EAAA,CACF;AACD,SAAO,KAAK;AACd;AAEA,eAAsB,cACpB,KACA;AACA,MAAI,CAAC,MAAM,WAAW,GAAG,GAAG;AAC1B,UAAM,SAAS,QAAQ;AAAA,EACzB;AACF;AC3DO,MAAM,QAAuB,MAAM;AAAA,EACxC,EAAE,KAAK,cAAc,MAAM,OAAO;AACpC;AAMO,MAAMC,WAAS,OAAO,EAAC,cAAa;AACnC,QAAA,SAAS,MAAM,WAAW,OAAO;AACvC,SAAO,KAAmB,EAAE,YAAY,CAAC,CAAC,OAAQ,CAAA;AACpD;AAEA,SAAS,MAAM;AACb,QAAM,EAAE,YAAAC,YAAW,IAAI,cAA6B;AACpD,8BACG,QACC,EAAA,UAAA;AAAA,IAAA,qBAAC,QACC,EAAA,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,KAAI;AAAA,UACJ,MAAK;AAAA,QAAA;AAAA,MACP;AAAA,0BACC,OAAM,EAAA;AAAA,0BACN,MAAK,EAAA;AAAA,MACL,oBAAA,QAAA,EAAK,MAAK,YAAW,SAAQ,yCAAwC;AAAA,IAAA,GACxE;AAAA,yBACC,QACC,EAAA,UAAA;AAAA,MAAA,oBAAC,SAAI,WAAW,UACd,UAAC,qBAAA,OAAA,EAAI,WAAU,QACb,UAAA;AAAA,QAAC,oBAAA,OAAA,EACC,UAAC,oBAAA,MAAA,EAAK,IAAG,KACP,8BAAC,UAAS,EAAA,WAAW,mBAAoB,CAAA,EAC3C,CAAA,GACF;AAAA,QACA,oBAAC,OAAI,EAAA,WAAU,QACb,UAAA,oBAAC,MAAK,EAAA,WAAW,gEAAgE,IAAG,WAAU,UAAA,SAAM,CAAA,GACtG;AAAA,QACA,oBAAC,OAAI,EAAA,WAAU,QACb,UAAA,oBAAC,MAAK,EAAA,WAAW,gEAAgE,IAAG,YAAW,UAAA,UAAO,CAAA,GACxG;AAAA,QACCA,eACC,oBAAC,OAAI,EAAA,WAAW,qBACd,UAAA,oBAAC,KAAE,EAAA,WAAW,gEAAgE,MAAK,cAAa,UAAA,SAAM,CAAA,GACxG;AAAA,QAED,CAACA,eACC,oBAAA,OAAA,EAAI,WAAW,qBACd,UAAC,oBAAA,MAAA,EAAK,WAAW,gEAAgE,IAAG,UAAS,kBAAK,CAAA,GACpG;AAAA,MAAA,EAAA,CAEJ,EACF,CAAA;AAAA,MACA,qBAAC,OAAI,EAAA,WAAU,eACb,UAAA;AAAA,QAAC,oBAAA,OAAA,EAAI,WAAU,WAAW,CAAA;AAAA,QACzB,oBAAA,OAAA,EAAI,WAAW,mBACd,UAAC,oBAAA,gBAAA,EACC,UAAC,oBAAA,iBAAA,EACE,UAAC,oBAAA,QAAA,CAAA,CAAO,EACX,CAAA,EACF,CAAA,GACF;AAAA,QACA,oBAAC,OAAI,EAAA,WAAU,WAAW,CAAA;AAAA,MAAA,GAC5B;AAAA,0BACC,SAAQ,EAAA;AAAA,IAAA,GACX;AAAA,EACF,EAAA,CAAA;AAEJ;AAEO,MAAM,gBAAgB,MAAM;AACjC,QAAM,QAAQ;AACd,iCAA+B,KAAK;AAC7B,SAAA,oBAAC,SAAI,UAAoB,uBAAA,CAAA;AAClC;AAEA,MAAe,OAAA,WAAW,GAAG;;;;;;;;ACzF7B,MAAM,YAAY,CAAC,YAAY,IAAI,UAAU,KAAK,QAAQ,CAAC,CAAC;AAC5D,MAAM,mBAAmB,CAAC,UAAU,UAAU,KAAK;AAEnD,MAAqB,uBAAuB,cAA2B;AAAA,EACrE,SAAS;AACP,WACG,oBAAA,qBAAA,EAAoB,OAAM,QAAO,QAAO,QACvC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,MAAM,KAAK,MAAM;AAAA,QACjB,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,OAAO;AAAA,UACP,MAAM;AAAA,UACN,QAAQ;AAAA,QACV;AAAA,QAEA,UAAA;AAAA,UAAC,oBAAA,eAAA,EAAc,iBAAgB,MAAM,CAAA;AAAA,UACrC,oBAAC,OAAM,EAAA,SAAQ,OAAO,CAAA;AAAA,UACtB,oBAAC,OAAM,EAAA,eAAe,UAAW,CAAA;AAAA,UACjC,oBAAC,SAAQ,EAAA,WAAW,iBAAkB,CAAA;AAAA,UACtC,oBAAC,QAAK,MAAK,YAAW,SAAQ,aAAY,QAAO,WAAU,MAAK,UAAU,CAAA;AAAA,QAAA;AAAA,MAAA;AAAA,IAE9E,EAAA,CAAA;AAAA,EAEJ;AACF;ACxBsB,eAAAD,SAAO,EAAC,WAAU;AACtC,QAAM,cAAc,OAAO;AAC3B,SAAO;AACT;AAEA,SAAwBE,UAAS;AAC/B,QAAM,UAAU;AAChB,QAAM,CAAC,aAAa,cAAc,IAAI,SAAkB,IAAI;AAC5D,YAAU,MAAM;AACd,QAAI,CAAC;AAAa;AAClB,mBAAe,KAAK;AACpB,YAAQ,KAAK;AAAA,EAAA,GACZ,CAAC,OAAO,CAAC;AAEV,SAAA,qBAAC,OAAI,EAAA,WAAW,wFACd,UAAA;AAAA,IAAC,oBAAA,MAAA,EAAG,WAAW,eAAe,UAAuB,2BAAA;AAAA,IACrD,oBAAC,OAAI,EAAA,WAAW,YACd,UAAA,oBAAC,kBAAe,MAAM,QAAQ,QAAQ,MAAA,CAAO,EAC/C,CAAA;AAAA,EACF,EAAA,CAAA;AAEJ;;;;;;AC1BA,MAAe,SAAA;ACGf,SAAwB,QAAS;AAE7B,SAAA,qBAAC,OAAI,EAAA,WAAW,WACd,UAAA;AAAA,IAAA,oBAAC,SAAI,WAAW,0BACd,8BAAC,OAAI,EAAA,KAAK,QAAQ,EACpB,CAAA;AAAA,wBACC,OAAI,EAAA,WAAW,2CACd,UAAC,qBAAA,cAAA,EAAW,WAAU,8DAClB,UAAA;AAAA,MAAA,oBAAC,OAAI,EAAA,WAAU,iDAAgD,eAAY,QAAO,OAAM,8BAA6B,MAAK,gBAAe,SAAQ,aAC7I,UAAA,oBAAC,QAAK,EAAA,GAAE,oOAAmO,CAAA,GAC/O;AAAA,MACC,oBAAA,KAAA,EAAE,WAAW,iBAAiB,UAAmK,uKAAA;AAAA,IAAA,EAAA,CACtM,EACF,CAAA;AAAA,EACF,EAAA,CAAA;AAEJ;;;;;ACZO,SAAS,cAAc,OAAO;AACnC,QAAM,SAAS;AACT,QAAA;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,IACE,YAAY,EAAC,IAAI,MAAM,IAAI,UAAU,MAAM,SAAA,CAAS;AAExD,iBAAe,aAAa,OAAO;AACjC,UAAM,eAAe;AACf,UAAA,OAAO,OAAO,MAAM,EAAE;AAC5B,UAAM,OAAO;EACf;AAEA,iBAAe,aAAa;AACnB,WAAA,WAAW,MAAM,MAAM,EAAE;AAAA,EAClC;AAEA,WAAS,UAAU;AACjB,UAAM,oBAAoB,CAAC,MAAM,QAAQ,MAAM,KAAK,OAAO,gBAAgB;AACpE,WAAA,MAAM,aAAa,QAAQ,sBAAsB;AAAA,EAC1D;AAEA,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,EAAA;AAEF,SACE,QAAQ,IAAI,KACV,oBAAC,OAAI,EAAA,KAAK,YAAY,OAAe,GAAG,YACtC,UAAC,qBAAA,OAAA,EAAI,WAAU,+GACb,UAAA;AAAA,IAAA,oBAAC,OAAK,EAAA,GAAG,WAAW,WAAU,YAC3B,UAAA,MAAM,WAAW,KAAM,oBAAA,wBAAA,EAAuB,WAAU,cAAc,CAAA,GACzE;AAAA,IACC,oBAAA,OAAA,EAAI,WAAU,gBACZ,gBAAM,MACT;AAAA,wBACC,OAAI,EAAA,WAAU,oBACb,UAAC,qBAAA,OAAA,EAAI,WAAU,eACb,UAAA;AAAA,MAAC,oBAAA,OAAA,EAAI,WAAU,QAAQ,CAAA;AAAA,MACvB,oBAAC,OAAI,EAAA,WAAU,SACZ,UAAA,MAAM,WAAY,oBAAA,SAAA,EAAM,MAAK,YAAW,SAAS,MAAM,QAAQ,UAAU,cAAc,WAAW,eAAA,CAAgB,IAAK,oBAAC,UAAO,WAAU,eAAe,SAAS,WAAA,CAAY,EAChL,CAAA;AAAA,IAAA,EAAA,CACF,EACF,CAAA;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAGN;ACtDA,MAAMC,eAAa;AAAA,EACjB,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AACP;AAEO,SAAS,YAAY;AAC1B,QAAM,SAAS;AACf,QAAM,CAAC,IAAI,KAAK,IAAIC,eAAM,SAAiB,EAAE;AAC7C,QAAM,CAAC,MAAM,OAAO,IAAIA,eAAM,SAAiB,EAAE;AACjD,QAAM,CAAC,MAAM,OAAO,IAAIA,eAAM,SAAqB,WAAW;AAE9D,WAAS,SAAS;AACT,WAAA,WAAW,OAAO,MAAS;AAAA,EACpC;AAEA,iBAAe,OAAO;AACpB,UAAM,OAAO,OAAO,IAAI,MAAM,IAAI;AAClC,UAAM,OAAO;AACN,WAAA,WAAW,OAAO,MAAS;AAAA,EACpC;AAEA,WAAS,UAAU,GAAG;AACpB,UAAM,aAAa,CAAC,KAAK,EAAE,OAAO,QAAQ,GAAG;AAC7C,YAAQ,CAAY,aAAA;AAClB,eAAS,EAAE,OAAO,QAAQ,GAAG,IAAI;AAC1B,aAAA,EAAC,GAAG;IAAQ,CACpB;AAAA,EACH;AAEA,YAAU,MAAM;AACV,QAAA,OAAO,WAAW,OAAO,kBAAkB;AACvC,YAAA,OAAO,iBAAiB,EAAE;AACxB,cAAA,OAAO,iBAAiB,IAAI;AACpC,UAAI,aAAa;AAEb,UAAA,OAAO,iBAAiB,MAAM;AAChC,mBAAW,UAAU,OAAO,OAAO,OAAO,iBAAiB,IAAI,GAAG;AAChE,cAAI,CAAC;AAAqB,yBAAA;AAAA,QAC5B;AAAA,MACF;AACA,UAAI,CAAC,YAAY;AACP,gBAAA,KAAK,MAAM,KAAK,UAAU,OAAO,iBAAiB,IAAI,CAAC,CAAC;AAAA,MAAA,OAC3D;AACL,gBAAQ,KAAK,MAAM,KAAK,UAAU,WAAW,CAAC,CAAC;AAAA,MACjD;AAAA,IACF;AAAA,EAAA,GACA,CAAC,OAAO,OAAO,CAAC;AAElB,SACG,qBAAA,OAAA,EAAI,WAAW,gBAAgB,OAAO,UAAU,aAAa,YAAY,IAAI,mBAAgB,eAAc,MAAK,UAAS,cAAW,QACnI,UAAA;AAAA,IAAC,oBAAA,OAAA,EAAI,WAAU,6DAA6D,CAAA;AAAA,IAC5E,oBAAC,OAAI,EAAA,WAAU,+CACb,UAAA,oBAAC,OAAI,EAAA,WAAU,0FACb,UAAA,qBAAC,OAAI,EAAA,WAAU,2HACb,UAAA;AAAA,MAAA,oBAAC,SAAI,WAAU,0CACb,UAAC,qBAAA,OAAA,EAAI,WAAU,0BACb,UAAA;AAAA,QAAA,oBAAC,OAAI,EAAA,WAAU,sHACb,UAAA,oBAAC,SAAI,WAAU,yCAAwC,eAAY,QAAO,OAAM,8BAA6B,OAAM,MAAK,QAAO,MAAK,MAAK,QAAO,SAAQ,aACtJ,UAAA,oBAAC,QAAK,EAAA,QAAO,gBAAe,eAAc,SAAQ,gBAAe,SAAQ,aAAY,KAAI,GAAE,gMAA+L,CAAA,EAC5R,CAAA,GACF;AAAA,QACA,qBAAC,OAAI,EAAA,WAAU,iDACb,UAAA;AAAA,UAAA,oBAAC,MAAG,EAAA,WAAU,mDAAkD,IAAG,eAAc,UAAU,cAAA;AAAA,UAC3F,qBAAC,OAAI,EAAA,WAAU,QACb,UAAA;AAAA,YAAA,oBAAC,WAAM,cAAc,OAAO,MAAK,QAAO,MAAK,QAAO,WAAU,mIAAkI,OAAO,MAAM,UAAU,CAAA,MAAK,QAAQ,EAAE,OAAO,KAAK,GAAG;AAAA,YACpP,oBAAA,MAAA,EAAG,WAAU,sCACX,iBAAO,KAAK,IAAI,EAAE,IAAI,CACrB,QAAA,oBAAC,MACC,EAAA,UAAA,oBAAC,UAAK,YAAU,KAAK,SAAS,WAAW,WAAW,oJAAoJ,KAAK,GAAG,IAAI,4BAA4B,WAAW,IACxP,UAAAD,aAAW,GAAG,EACjB,CAAA,KAHO,GAIT,CACD,GACL;AAAA,UAAA,GACA;AAAA,QAAA,GACF;AAAA,MAAA,EAAA,CACF,EACF,CAAA;AAAA,MACA,qBAAC,OAAI,EAAA,WAAU,kCACb,UAAA;AAAA,QAAC,qBAAA,OAAA,EAAI,WAAU,UACb,UAAA;AAAA,UAAA,oBAAC,YAAO,MAAK,UAAS,SAAS,MAAM,WAAU,iLAAgL,UAAI,OAAA,CAAA;AAAA,UACnO,oBAAC,YAAO,MAAK,UAAS,SAAS,QAAQ,WAAU,yLAAwL,UAAM,SAAA,CAAA;AAAA,QAAA,GACjP;AAAA,QACA,oBAAC,OAAI,EAAA,WAAU,qBACb,UAAA,oBAAC,UAAO,EAAA,MAAK,UAAS,WAAU,6KAA4K,UAAA,SAAM,CAAA,GACpN;AAAA,MAAA,GACF;AAAA,IAAA,EACF,CAAA,EACF,CAAA,GACF;AAAA,EACF,EAAA,CAAA;AAEJ;AC/EA,MAAM,aAAa;AAAA,EACjB,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AACP;AAEsB,eAAAH,SAAO,EAAC,WAAU;AACtC,QAAM,cAAc,OAAO;AAC3B,SAAO;AACT;AAEA,SAAwB,SAAS;AAC/B,QAAM,SAAS;AACf,QAAM,CAAC,aAAa,cAAc,IAAI,SAAkB,IAAI;AAC5D,QAAM,CAAC,SAAS,UAAU,IAAI,SAAkB,KAAK;AACrD,QAAM,CAAC,MAAM,OAAO,IAAII,eAAM,SAAqB;AAAA,IACjD,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,EAAA,CACN;AACD,QAAM,UAAU;AAAA,IACd,UAAU,aAAa;AAAA,IACvB,UAAU,WAAW;AAAA,IACrB,UAAU,gBAAgB;AAAA,MACxB,kBAAkB;AAAA,IAAA,CACnB;AAAA,EAAA;AAEH,YAAU,MAAM;AACd,QAAI,CAAC;AAAa;AAClB,WAAO,KAAK;AACZ,mBAAe,KAAK;AAAA,EAAA,GACnB,CAAC,aAAa,MAAM,CAAC;AAExB,iBAAe,iBAAiB,GAAG;AACjC,MAAE,eAAe;AACX,UAAA,OAAO,EAAE,OAAO,KAAK;AACrB,UAAA,OAAO,OAAO,MAAM,IAAI;AAC9B,UAAM,OAAO;AACb,MAAE,OAAO;EACX;AAEA,WAAS,aAAa,OAAO;AAC3B,eAAW,CAAC,OAAO;AAAA,EACrB;AAEA,iBAAe,cAAc,OAAO;AAC5B,UAAA,EAAC,QAAQ,KAAQ,IAAA;AACjB,UAAA,WAAW,OAAO,OAAO,UAAU,UAAQ,KAAK,aAAa,OAAO,EAAE;AACtE,UAAA,WAAW,OAAO,OAAO,UAAU,UAAQ,KAAK,aAAa,KAAK,EAAE;AAG1E,QAAI,WAAW,UAAU;AAEnB,UAAA,YAAY,OAAO,OAAO,QAAQ;AACtB,eAAO,OAAO,SAAS;AAAA,MACvC;AAAA,IACF;AACA,QAAI,aAAa,UAAU;AACzB,aAAO,IAAI;AAAA,QACT,QAAQ,UAAU,OAAO,QAAQ,UAAU,QAAQ;AAAA,QACnD,aAAa,OAAO;AAAA,MAAA,CACrB;AACK,YAAA,OAAO,KAAK,UAAU,QAAQ;AACpC,YAAM,OAAO;IACf;AAAA,EACF;AAEA,WAAS,UAAU,GAAG;AACpB,UAAM,aAAa,CAAC,KAAK,EAAE,OAAO,QAAQ,GAAG;AAC7C,YAAQ,CAAY,aAAA;AAClB,eAAS,EAAE,OAAO,QAAQ,GAAG,IAAI;AAC1B,aAAA,EAAC,GAAG;IAAQ,CACpB;AAAA,EACH;AAEA,SACG,oBAAA,UAAA,EACG,UAAC,qBAAA,OAAA,EAAM,SAAS,QACd,UAAA;AAAA,IAAA,oBAAC,WAAU,EAAA;AAAA,IACV,OAAO,QACH,qBAAA,OAAA,EAAI,WAAW,iEACd,UAAA;AAAA,MAAA,oBAAC,OAAI,EAAA;AAAA,MACL,oBAAC,OACC,EAAA,UAAA,qBAAC,KAAE,EAAA,UAAA;AAAA,QAAA;AAAA,QAGA,oBAAA,QAAA,EAAK,WAAW,qFAAqF,UAAS,aAAA;AAAA,MAAA,EAAA,CACjH,EACF,CAAA;AAAA,0BACC,OAAI,EAAA;AAAA,IAAA,EAAA,CACP,IACA;AAAA,IACJ;AAAA,MAAC;AAAA,MAAA;AAAA,QACC;AAAA,QACA,oBAAoB;AAAA,QACpB,WAAW;AAAA,QAEX,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO,OAAO;AAAA,YACd,UAAU;AAAA,YAET,UAAA,OAAO,OAAO,IAAI,CAAA,8BAAU,eAAc,EAAA,MAAM,MAAM,MAA2B,IAAI,MAAM,UAAU,QAAQ,MAAM,QAAQ,MAAM,MAAM,MAAM,UAAU,CAAC,QAAA,GAAvF,MAAM,QAA0F,CAAE;AAAA,UAAA;AAAA,QACtK;AAAA,MAAA;AAAA,IACF;AAAA,IACE,WAAW,OAAO,QACjB,qBAAA,QAAA,EAAK,UAAU,kBACd,UAAA;AAAA,MAAC,qBAAA,OAAA,EAAI,WAAU,eACb,UAAA;AAAA,QAAA,oBAAC,OAAI,EAAA,WAAU,cACb,UAAA,oBAAC,SAAM,EAAA,cAAc,OAAO,MAAK,QAAO,MAAK,QAAO,WAAU,8HAA8H,CAAA,GAC9L;AAAA,4BACC,SAAM,EAAA,MAAK,UAAS,OAAM,aAAY,WAAU,gIAA+H;AAAA,MAAA,GAClL;AAAA,0BACC,MAAG,EAAA,WAAU,eACX,UAAA,OAAO,KAAK,IAAI,EAAE,IAAI,CAAC,KAAK,MAC3B,oBAAC,MAAG,EAAA,YAAU,KAAe,SAAS,WAAW,WAAW,OAAO,MAAM,IAAI,KAAK,MAAM,kGAAkG,KAAK,GAAG,IAAI,4BAA4B,WAAW,IAC1O,UAAW,WAAA,GAAG,KADO,GAExB,CACD,GACH;AAAA,IAAA,EAAA,CACF,IACE;AAAA,IACJ,qBAAC,SAAM,EAAA,WAAU,gDACf,UAAA;AAAA,MAAA,oBAAC,SAAM,EAAA,MAAK,YAAW,OAAM,IAAG,WAAU,gBAAe,SAAS,WAAW,OAAO,OAAO,UAAU,cAAc;AAAA,MACnH,oBAAC,OAAI,EAAA,WAAU,ifAAif,CAAA;AAAA,MAC/f,oBAAA,QAAA,EAAK,WAAU,+DAA8D,UAAiB,qBAAA;AAAA,IAAA,GACjG;AAAA,EAAA,EACF,CAAA,EACJ,CAAA;AAEJ;;;;;;ACzJA,MAAM,eAAe,IAAI;AAAA,EACvB,QAAQ,IAAI;AAAA,EACZ,QAAQ,IAAI;AAAA,EACZ,QAAQ,IAAI;AACd;AAQO,MAAM,SAAS,YAAY;AAC1B,QAAAC,YAAW,aAAa,gBAAgB;AAAA,IAC5C,aAAa;AAAA,IACb,OAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EAAA,CACD;AACD,SAAO,KAAK;AAAA,IACV,MAAM;AAAA,MACJ,UAAAA;AAAA,IACF;AAAA,EAAA,CACD;AACH;AAEA,SAAwB,QAAS;AACzB,QAAA,EAAC,SAAQ;AACf,SACG,oBAAA,OAAA,EAAI,WAAW,wFACd,+BAAC,MAAK,EAAA,IAAG,qBAAoB,WAAW,oBAAoB,IAAI,KAAK,UAAU,eAAY,gBACzF,UAAA;AAAA,IAAA,oBAAC,OAAI,EAAA,WAAW,QACd,UAAA,oBAAC,WAAS,CAAA,GACZ;AAAA,IACC,oBAAA,OAAA,EAAI,WAAW,eAAe,UAE/B,qBAAA;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","x_google_ignoreList":[0]}