import{r as a,j as T}from"./jsx-runtime-BNRZUmo-.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[i]="e044c838-9cd7-41f5-8213-5f5bc73cb686",n._sentryDebugIdIdentifier="sentry-dbid-e044c838-9cd7-41f5-8213-5f5bc73cb686")}catch{}})();const x={Mon:!1,Tue:!1,Wed:!1,Thu:!1,Fri:!1,Sat:!1,Sun:!1},m={Mon:!0,Tue:!0,Wed:!0,Thu:!0,Fri:!0,Sat:!0,Sun:!0},u=a.createContext(null);function N({children:n}){const[i,r]=a.useState([]),[f,l]=a.useState(!1),[y,b]=a.useState(""),[h,p]=a.useState(!1),[g,c]=a.useState(void 0),d=e=>(r([...e.habits]),l(!e.habits.length),b(e.current_dow),{}),S={habits:i,empty:f,currentDayOfWeek:y,editing:h,setEditing:async(e,t)=>{c(t?i.find(s=>s.id===t):void 0),p(e)},currentlyEditing:g,load:async()=>{const t=await(await fetch("/v1/habits-daily")).json();t.habits.map(s=>{s.id=s.habit_id}),d(t)},set:d,create:async(e,t)=>{let s=!1;for(const o of Object.values(t))o&&(s=!0);await fetch("/v1/habits",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,days:s?t:void 0})})},update:async(e,t,s)=>{let o=!1;for(const v of Object.values(s))v&&(o=!0);await fetch(`/v1/habits/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,days:o?s:m})})},toggle:async e=>{const t=i.find(s=>{if(s.id===e)return!0});t&&await fetch("/v1/habits-daily",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({habit_id:t.habit_id,status:!t.status,date:t.date})})},move:async(e,t)=>{await fetch("/v1/habits/array-move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldIndex:e,newIndex:t})})}};return T.jsx(u.Provider,{value:S,children:n})}function P(){return a.useContext(u)}export{N as H,x as N,P as u};
//# sourceMappingURL=habits-DiQg7JNc.js.map
