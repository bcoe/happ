import{r as s,j as P}from"./jsx-runtime-CUOzFbf5.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[o]="0508f4be-fcb2-40ca-86e9-2d7a2f3a7fee",a._sentryDebugIdIdentifier="sentry-dbid-0508f4be-fcb2-40ca-86e9-2d7a2f3a7fee")}catch{}})();const J={Mon:!1,Tue:!1,Wed:!1,Thu:!1,Fri:!1,Sat:!1,Sun:!1},H={Mon:!0,Tue:!0,Wed:!0,Thu:!0,Fri:!0,Sat:!0,Sun:!0},u=s.createContext(null);function k({children:a}){const[o,r]=s.useState([]),[y,l]=s.useState(!1),[h,b]=s.useState(""),[p,S]=s.useState(!1),[g,c]=s.useState(void 0),[v,T]=s.useState(""),d=e=>(r([...e.habits]),l(!e.habits.length),b(e.current_dow),{}),m=async(e,t)=>{let n=!1;for(const i of Object.values(t))i&&(n=!0);await fetch("/v1/habits",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,days:n?t:void 0})})},w=async(e,t,n)=>{let i=!1;for(const x of Object.values(n))x&&(i=!0);await fetch(`/v1/habits/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,days:i?n:H})})},j=async e=>{await fetch(`/v1/habits/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})},E=async e=>{const t=o.find(n=>{if(n.id===e)return!0});t&&await fetch("/v1/habits-daily",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({habit_id:t.habit_id,status:!t.status,date:t.date})})},O=async(e,t)=>{await fetch("/v1/habits/array-move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldIndex:e,newIndex:t})})},_=async()=>{const t=await(await fetch("/v1/habits-daily")).json();t.habits.map(n=>{n.id=n.habit_id}),d(t),await f()},C=async(e,t)=>{c(t?o.find(n=>n.id===t):void 0),S(e)},D=async e=>{await fetch("/v1/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:e})})},f=async()=>{const e=await fetch("/v1/notes/today",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>t.note?t.note.note:"");console.info("setting note",e),T(e)},N={habits:o,empty:y,currentDayOfWeek:h,editing:p,setEditing:C,currentlyEditing:g,load:_,set:d,create:m,update:w,del:j,toggle:E,move:O,note:v,createNote:D,loadNote:f};return P.jsx(u.Provider,{value:N,"data-sentry-element":"unknown","data-sentry-component":"HabitsProvider","data-sentry-source-file":"habits.tsx",children:a})}function W(){return s.useContext(u)}export{k as H,J as N,W as u};
//# sourceMappingURL=habits-tKhYF_uH.js.map
