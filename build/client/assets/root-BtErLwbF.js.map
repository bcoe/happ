{"version":3,"file":"root-BtErLwbF.js","sources":["../../../node_modules/@sentry/remix/build/esm/utils/vendor/response.js","../../../node_modules/@sentry/remix/build/esm/client/errors.js","../../../app/styles/shared.css?url","../../../app/root.tsx"],"sourcesContent":["import { _optionalChain } from '@sentry/utils';\nimport { matchRoutes } from '@remix-run/router';\n\n/**\n * Based on Remix Implementation\n *\n * https://github.com/remix-run/remix/blob/7688da5c75190a2e29496c78721456d6e12e3abe/packages/remix-server-runtime/data.ts#L131-L145\n */\nasync function extractData(response) {\n  const contentType = response.headers.get('Content-Type');\n\n  // Cloning the response to avoid consuming the original body stream\n  const responseClone = response.clone();\n\n  if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n    return responseClone.json();\n  }\n\n  return responseClone.text();\n}\n\n/**\n * Taken from Remix Implementation\n *\n * https://github.com/remix-run/remix/blob/32300ec6e6e8025602cea63e17a2201989589eab/packages/remix-server-runtime/responses.ts#L60-L77\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isResponse(value) {\n  return (\n    value != null &&\n    /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n    typeof value.status === 'number' &&\n    typeof value.statusText === 'string' &&\n    typeof value.headers === 'object' &&\n    typeof value.body !== 'undefined'\n    /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n  );\n}\n\n// https://github.com/remix-run/remix/blob/7688da5c75190a2e29496c78721456d6e12e3abe/packages/remix-server-runtime/responses.ts#L1-L4\n\n/**\n * This is a shortcut for creating `application/json` responses. Converts `data`\n * to JSON and sets the `Content-Type` header.\n *\n * @see https://remix.run/api/remix#json\n *\n * https://github.com/remix-run/remix/blob/7688da5c75190a2e29496c78721456d6e12e3abe/packages/remix-server-runtime/responses.ts#L12-L24\n */\nconst json = (data, init = {}) => {\n  const responseInit = typeof init === 'number' ? { status: init } : init;\n  const headers = new Headers(responseInit.headers);\n  if (!headers.has('Content-Type')) {\n    headers.set('Content-Type', 'application/json; charset=utf-8');\n  }\n  return new Response(JSON.stringify(data), {\n    ...responseInit,\n    headers,\n  });\n};\n\n/**\n * Remix Implementation:\n * https://github.com/remix-run/remix/blob/38e127b1d97485900b9c220d93503de0deb1fc81/packages/remix-server-runtime/routeMatching.ts#L12-L24\n *\n * Changed so that `matchRoutes` function is passed in.\n */\nfunction matchServerRoutes(\n  routes,\n  pathname,\n) {\n  const matches = matchRoutes(routes, pathname);\n\n  if (!matches) {\n    return null;\n  }\n\n  return matches.map(match => ({\n    params: match.params,\n    pathname: match.pathname,\n    route: match.route,\n    pathnameBase: match.pathnameBase,\n  }));\n}\n\n/**\n * https://github.com/remix-run/remix/blob/97999d02493e8114c39d48b76944069d58526e8d/packages/remix-server-runtime/server.ts#L573-L586\n */\nfunction isIndexRequestUrl(url) {\n  for (const param of url.searchParams.getAll('index')) {\n    // only use bare `?index` params without a value\n    // ✅ /foo?index\n    // ✅ /foo?index&index=123\n    // ✅ /foo?index=123&index\n    // ❌ /foo?index=123\n    if (param === '') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * https://github.com/remix-run/remix/blob/97999d02493e8114c39d48b76944069d58526e8d/packages/remix-server-runtime/server.ts#L588-L596\n */\nfunction getRequestMatch(\n  url,\n  matches,\n) {\n  const match = matches.slice(-1)[0] ;\n\n  if (!isIndexRequestUrl(url) && _optionalChain([match, 'access', _ => _.route, 'access', _2 => _2.id, 'optionalAccess', _3 => _3.endsWith, 'call', _4 => _4('/index')])) {\n    return matches.slice(-2)[0] ;\n  }\n\n  return match;\n}\n\n/**\n * https://github.com/remix-run/remix/blob/3e589152bc717d04e2054c31bea5a1056080d4b9/packages/remix-server-runtime/responses.ts#L75-L85\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isDeferredData(value) {\n  const deferred = value;\n  return (\n    deferred &&\n    typeof deferred === 'object' &&\n    typeof deferred.data === 'object' &&\n    typeof deferred.subscribe === 'function' &&\n    typeof deferred.cancel === 'function' &&\n    typeof deferred.resolveData === 'function'\n  );\n}\n\n/**\n * https://github.com/remix-run/react-router/blob/f9b3dbd9cbf513366c456b33d95227f42f36da63/packages/router/utils.ts#L1574\n *\n * Check if the given error is an ErrorResponse generated from a 4xx/5xx\n * Response thrown from an action/loader\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRouteErrorResponse(value) {\n  const error = value;\n\n  return (\n    error != null &&\n    typeof error.status === 'number' &&\n    typeof error.statusText === 'string' &&\n    typeof error.internal === 'boolean' &&\n    'data' in error\n  );\n}\n\nexport { extractData, getRequestMatch, isDeferredData, isIndexRequestUrl, isResponse, isRouteErrorResponse, json, matchServerRoutes };\n//# sourceMappingURL=response.js.map\n","import { captureException } from '@sentry/core';\nimport { isNodeEnv } from '@sentry/utils';\nimport { isResponse } from '../utils/vendor/response.js';\n\n/**\n * Captures an error that is thrown inside a Remix ErrorBoundary.\n *\n * @param error The error to capture.\n * @returns void\n */\nfunction captureRemixErrorBoundaryError(error) {\n  // Server-side errors also appear here without their stacktraces.\n  // So, we only capture client-side runtime errors here.\n  // ErrorResponses that are 5xx errors captured at loader / action level by `captureRemixRouteError` function,\n  // And other server-side errors captured in `handleError` function where stacktraces are available.\n  //\n  // We don't want to capture:\n  // - Response Errors / Objects [They are originated and handled on the server-side]\n  // - SSR Errors [They are originated and handled on the server-side]\n  // - Anything without a stacktrace [Remix trims the stacktrace of the errors that are thrown on the server-side]\n  if (isResponse(error) || isNodeEnv() || !(error instanceof Error)) {\n    return;\n  }\n\n  return captureException(error, {\n    mechanism: {\n      type: 'instrument',\n      handled: false,\n      data: {\n        function: 'ReactError',\n      },\n    },\n  });\n}\n\nexport { captureRemixErrorBoundaryError };\n//# sourceMappingURL=errors.js.map\n","import \"/Users/benjamincoe/oss/happ/app/styles/shared.css?transform-only\";export default \"__VITE_CSS_URL__2f55736572732f62656e6a616d696e636f652f6f73732f686170702f6170702f7374796c65732f7368617265642e6373733f7472616e73666f726d2d6f6e6c79__\"","import React from 'react';\nimport { withSentry, captureRemixErrorBoundaryError } from \"@sentry/remix\";\nimport {\n  Link,\n  Links,\n  Meta,\n  Outlet,\n  Scripts,\n  useRouteError,\n  useLoaderData,\n} from \"@remix-run/react\";\nimport { json, LinksFunction } from \"@remix-run/node\";\nimport styles from \"./styles/shared.css?url\";\nimport {HabitsProvider} from './providers/habits';\nimport {MetricsProvider} from './providers/metrics';\nimport { isLoggedIn } from \"./session.server\";\nimport { FaThList } from \"react-icons/fa\";\n\nexport const links: LinksFunction = () => [\n  { rel: \"stylesheet\", href: styles },\n];\n\ntype LoggedInData = {\n  isLoggedIn: boolean;\n}\n\nexport const loader = async ({request}) => {\n  const userId = await isLoggedIn(request);\n  return json<LoggedInData>({ isLoggedIn: !!userId });\n};\n\nfunction App() {\n  const { isLoggedIn } = useLoaderData<typeof loader>();\n  return (\n    <html>\n      <head>\n        <link\n          rel=\"icon\"\n          href=\"data:image/x-icon;base64,AA\"\n        />\n        <Links />\n        <Meta />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      </head>\n      <body>\n        <div className={'header'}>\n          <div className=\"flex\">\n            <div>\n              <Link to=\"/\">\n                <FaThList className={'ml-8 mt-1 size-5'} />\n              </Link>\n            </div>\n            <div className='ml-8'>\n              <Link className={'font-medium text-blue-600 dark:text-blue-500 hover:underline'} to=\"/habits\">Habits</Link>\n            </div>\n            <div className='ml-8'>\n              <Link className={'font-medium text-blue-600 dark:text-blue-500 hover:underline'} to=\"/metrics\">Metrics</Link>\n            </div>\n            {isLoggedIn &&\n              <div className={'text-right w-full'}>\n                <a className={'font-medium text-blue-600 dark:text-blue-500 hover:underline'} href=\"/v1/logout\">Logout</a>\n              </div>\n            }\n            {!isLoggedIn &&\n              <div className={'text-right w-full'}>\n                <Link className={'font-medium text-blue-600 dark:text-blue-500 hover:underline'} to=\"/login\">Login</Link>\n              </div>\n            }\n          </div>\n        </div>\n        <div className='flex w-full'>\n          <div className='lg:w-1/6' />\n          <div className={'w-full lg:w-4/6'}>\n            <HabitsProvider>\n              <MetricsProvider>\n                {<Outlet />}\n              </MetricsProvider>\n            </HabitsProvider>\n          </div>\n          <div className='lg:w-1/6' />\n        </div>\n        <Scripts />\n      </body>\n    </html>\n  );\n}\n\nexport const ErrorBoundary = () => {\n  const error = useRouteError();\n  captureRemixErrorBoundaryError(error);\n  return <div>Something went wrong</div>;\n};\n\nexport default withSentry(App);\n"],"names":["isResponse","value","captureRemixErrorBoundaryError","error","isNodeEnv","captureException","styles","links","rel","href","App","isLoggedIn","useLoaderData","children","jsxs","jsx","Links","Meta","name","content","className","Link","to","FaThList","HabitsProvider","MetricsProvider","Outlet","Scripts","ErrorBoundary","useRouteError","withSentry"],"mappings":"8qBA2BA,SAASA,EAAWC,EAAO,CACzB,OACEA,GAAS,MAET,OAAOA,EAAM,QAAW,UACxB,OAAOA,EAAM,YAAe,UAC5B,OAAOA,EAAM,SAAY,UACzB,OAAOA,EAAM,KAAS,GAG1B,CC3BA,SAASC,EAA+BC,EAAO,CAU7C,GAAI,EAAAH,EAAWG,CAAK,GAAKC,EAAW,GAAI,EAAED,aAAiB,QAI3D,OAAOE,EAAiBF,EAAO,CAC7B,UAAW,CACT,KAAM,aACN,QAAS,GACT,KAAM,CACJ,SAAU,YACX,CACF,CACL,CAAG,CACH,CCjC0E,MAAeG,EAAA,8BCkB5EC,EAAuBA,IAAM,CACxC,CAAEC,IAAK,aAAcC,KAAMH,CAAO,CAAA,EAYpC,SAASI,GAAM,CACb,KAAM,CAAEC,WAAAA,CAAW,EAAIC,EAA6B,EACpD,cACG,OACC,CAAAC,SAAA,CAAAC,EAAA,KAAC,OACC,CAAAD,SAAA,CAAAE,EAAA,IAAC,OAAA,CACCP,IAAI,OACJC,KAAK,8BACP,QACCO,EAAM,EAAA,QACNC,EAAK,CAAA,CAAA,EACLF,EAAA,IAAA,OAAA,CAAKG,KAAK,WAAWC,QAAQ,uCAAwC,CAAA,CAAA,CACxE,CAAA,SACC,OACC,CAAAN,SAAA,CAAAE,EAAA,IAAC,OAAIK,UAAW,SACdP,SAACC,EAAA,KAAA,MAAA,CAAIM,UAAU,OACbP,SAAA,CAACE,EAAA,IAAA,MAAA,CACCF,SAACE,EAAA,IAAAM,EAAA,CAAKC,GAAG,IACPT,eAACU,EAAS,CAAAH,UAAW,mBAAoB,EAC3C,CACF,CAAA,EACAL,EAAA,IAAC,MAAI,CAAAK,UAAU,OACbP,SAAAE,EAAA,IAACM,EAAK,CAAAD,UAAW,+DAAgEE,GAAG,UAAUT,SAAA,SAAM,CACtG,CAAA,EACAE,EAAA,IAAC,MAAI,CAAAK,UAAU,OACbP,SAAAE,EAAA,IAACM,EAAK,CAAAD,UAAW,+DAAgEE,GAAG,WAAWT,SAAA,UAAO,EACxG,EACCF,GACCI,EAAA,IAAC,MAAI,CAAAK,UAAW,oBACdP,SAAAE,EAAA,IAAC,IAAE,CAAAK,UAAW,+DAAgEX,KAAK,aAAaI,SAAA,SAAM,CACxG,CAAA,EAED,CAACF,GACCI,EAAA,IAAA,MAAA,CAAIK,UAAW,oBACdP,SAACE,EAAA,IAAAM,EAAA,CAAKD,UAAW,+DAAgEE,GAAG,SAAST,iBAAK,CACpG,CAAA,CAAA,EAEJ,CACF,CAAA,EACAC,EAAA,KAAC,MAAI,CAAAM,UAAU,cACbP,SAAA,CAACE,EAAA,IAAA,MAAA,CAAIK,UAAU,UAAW,CAAA,EACzBL,EAAA,IAAA,MAAA,CAAIK,UAAW,kBACdP,SAACE,EAAA,IAAAS,EAAA,CACCX,SAACE,EAAA,IAAAU,EAAA,CACEZ,SAACE,EAAAA,IAAAW,EAAA,EAAO,EACX,EACF,CACF,CAAA,EACAX,EAAA,IAAC,MAAI,CAAAK,UAAU,UAAW,CAAA,CAAA,CAC5B,CAAA,QACCO,EAAQ,CAAA,CAAA,CAAA,CACX,CAAA,CAAA,CACF,CAAA,CAEJ,CAEaC,MAAAA,EAAgBA,IAAM,CACjC,MAAMzB,EAAQ0B,IACd3B,OAAAA,EAA+BC,CAAK,EAC7BY,EAAAA,IAAC,OAAIF,SAAoB,sBAAA,CAAA,CAClC,EAEeiB,EAAAA,EAAWpB,CAAG","x_google_ignoreList":[0,1]}